<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>First Steps With EhCache &middot; Chase the Devil</title>

  
  <link rel="stylesheet" href="http://chasethedevil.github.io/css/poole.css">
  <link rel="stylesheet" href="http://chasethedevil.github.io/css/hyde.css">
  <link rel="stylesheet" href="http://chasethedevil.github.io/css/poole-overrides.css">
  <link rel="stylesheet" href="http://chasethedevil.github.io/css/hyde-overrides.css">
  <link rel="stylesheet" href="http://chasethedevil.github.io/css/hyde-x.css">
  <link rel="stylesheet" href="http://chasethedevil.github.io/css/highlight/sunburst.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://chasethedevil.github.io/touch-icon-144-precomposed.png">
  <link href="http://chasethedevil.github.io/favicon.png" rel="icon">

  
  
  
  

  <meta name="description" content="">
  <meta name="keywords" content="">
  <link rel="author" href="http://plus.google.com/105444622997415581493">
<script type="text/javascript"
  src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<link href=' http://fonts.googleapis.com/css?family=UnifrakturMaguntia' rel='stylesheet' type='text/css'>
</head>
<body class="theme-base-00">
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      
      <h1>Chase the Devil</h1>
      <p class="lead">Technical blog for Fabien.</p>
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item"><a href="http://chasethedevil.github.io/">Blog</a></li>
      
      <li class="sidebar-nav-item"><a href="http://chasethedevil.github.io/about/">About</a></li>
      
      <li class="sidebar-nav-item"><a href="http://chasethedevil.github.io/post/">Posts</a></li>
      
    </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      <script type="text/javascript">document.write("<a href=\"mail" + "to:" + new Array("fabien","2ipi.com").join("@") + "?subject=your%20blog\">" + '<i class="fa fa-envelope fa-3x"></i>' + "</" + "a>");</script>  
      
      
      
      
      
      
      <a href="https://twitter.com/logos01"><i class="fa fa-twitter-square fa-3x"></i></a>
      
      <a href="http://chasethedevil.github.io/index.xml" type="application/rss+xml"><i class="fa fa-rss-square fa-3x"></i></a>
      </li>
    </ul>

    

    
  </div>
</div>


<div class="content container">
  <div class="post">
    <h1>First Steps With EhCache</h1>
    <span class="post-date">May 4, 2006 &middot; 2 minute read
    </span>
    <div>If you need to cache objects in your system, <a href="http://ehcache.sourceforge.net">Ehcache</a> is a simple cache written in Java, widely used and well tested. I will present here a short tutorial on how to use EhCache for people who don't want to look around the documentation at first, but just want to test if it works in their project and to see how easy it is to setup. </div> <div> </div> <div><span style="font-size:130%;">Installation</span></div> <div>Download Ehcache from the Download link on <a href="http://ehcache.sourceforge.net">http://ehcache.sourceforge.net</a>. Current release is 1.2. </div> <div>Unpack Ehcache with an unpacker that knows the tgz format. For unix users, it is trivial, for windows users, <a href="http://www.7-zip.org/">7zip</a> is a free (and open-source) unpacker. It is probably the most popular, but there are other ones like  <a href="http://www.tugzip.com">tugzip</a> or <a href="http://www.izarc.org">izarc</a> or <a href="http://www.win-rar.com/download.html">winrar</a>.</div> <div> </div> <div>In your java project you need to have ehcache-1.2.jar, commons-collections-2.1.1.jar and commons-logging-1.0.4.jar (versions numbers may vary) in your classpath, those libraries are shipped with ehcache.</div> <div> </div> <div><span style="font-size:130%;">Cache Configuration</span></div> <div>Write an ehcache.xml file where you describe what cache you want to use. There can be several files per project, several cache descriptions per file. I use here a persistent cache. Configuration file is well described at  <a href="http://ehcache.sourceforge.net/documentation/configuration.html">http://ehcache.sourceforge.net/documentation/configuration.html</a></div> <div><span style="font-size:85%;"></span> </div> <div><span style="font-size:85%;">&lt;ehcache&gt;</span></div> <div><span style="font-size:85%;"></span> </div> <div><span style="font-size:85%;">&lt;cache name="firstcache" maxElementsInMemory="10000" eternal="false" overflowToDisk="true" timeToIdleSeconds="0" timeToLiveSeconds="0" diskPersistent="true" diskExpiryThreadIntervalSeconds="120"/&gt; </span></div> <div> <p>&lt;/ehcache&gt;</p></div> <div> </div> <div><span style="font-size:130%;">Code</span></div> <div><pre><span style="color:#006699;"><strong>static</strong></span>  <span style="color:#000000;"><strong>{</strong></span>  <br /> <span style="color:#ff8400;">//</span><span style="color:#ff8400;">Create</span><span style="color:#ff8400;"> </span><span style="color:#ff8400;">a</span><span style="color:#ff8400;"> </span><span style="color:#ff8400;">CacheManager</span><span style="color:#ff8400;">  </span><span style="color:#ff8400;">using</span><span style="color:#ff8400;"> </span><span style="color:#ff8400;">a</span><span style="color:#ff8400;"> </span><span style="color:#ff8400;">specific</span><span style="color:#ff8400;"> </span><span style="color:#ff8400;"> config</span><span style="color:#ff8400;"> </span><span style="color:#ff8400;">file</span>  <br /> cacheManager <span style="color:#000000;"><strong>=</strong></span> <span style="color:#9966ff;">CacheManager.create</span>(TestClass.<span style="color:#0099ff;"><strong>class</strong></span>.<span style="color:#9966ff;">getResource</span>(<span style="color:#ff00cc;"> "</span><span style="color:#ff00cc;">/config/ehcache.xml</span><span style="color:#ff00cc;">"</span>));<br /> cache <span style="color:#000000;"><strong>=</strong></span> cacheManager.<span style="color:#9966ff;">getCache</span>(<span style="color:#ff00cc;">"</span><span style="color:#ff00cc;">firstcache</span><span style="color:#ff00cc;">"</span>);<br /><span style="color:#000000;"><strong>}</strong></span> <br /><br /><span style="color:#6600cc;">/**</span><span style="color:#6600cc;"><br /></span><span style="color:#6600cc;"> *</span><span style="color:#6600cc;"> </span><span style="color:#6600cc;">retrieves</span><span style="color:#6600cc;"> </span><span style="color:#6600cc;">value</span><span style="color:#6600cc;"> </span> <span style="color:#6600cc;">from</span><span style="color:#6600cc;"> </span><span style="color:#6600cc;">cache</span><span style="color:#6600cc;"> </span><span style="color:#6600cc;">if</span><span style="color:#6600cc;"> </span><span style="color:#6600cc;">exists</span><br /> <span style="color:#6600cc;"></span><span style="color:#6600cc;">*</span><span style="color:#6600cc;"> </span><span style="color:#6600cc;">if</span><span style="color:#6600cc;"> </span><span style="color:#6600cc;">not</span><span style="color:#6600cc;"> </span><span style="color:#6600cc;"> create</span><span style="color:#6600cc;"> </span><span style="color:#6600cc;">it</span><span style="color:#6600cc;"> </span><span style="color:#6600cc;">and</span><span style="color:#6600cc;"> </span><span style="color:#6600cc;">add</span><span style="color:#6600cc;">  </span><span style="color:#6600cc;">it</span><span style="color:#6600cc;"> </span><span style="color:#6600cc;">to</span><span style="color:#6600cc;"> </span><span style="color:#6600cc;">cache</span> <span style="color:#6600cc;">*/</span><br /><span style="color:#006699;"><strong>public</strong></span> String <span style="color:#9966ff;">doit</span>(String key, String value) <span style="color:#000000;"><strong>{</strong></span><br /> <span style="color:#ff8400;">//</span><span style="color:#ff8400;">get</span><span style="color:#ff8400;"> </span><span style="color:#ff8400;">an</span><span style="color:#ff8400;"> </span><span style="color:#ff8400;">element</span><span style="color:#ff8400;"> </span> <span style="color:#ff8400;">from</span><span style="color:#ff8400;"> </span><span style="color:#ff8400;">cache</span><span style="color:#ff8400;"> </span><span style="color:#ff8400;">by</span><span style="color:#ff8400;"> </span><span style="color:#ff8400;">key</span><br />  Element e <span style="color:#000000;"><strong>=</strong></span> cache.<span style="color:#9966ff;">get</span>(key);<br /> <span style="color:#006699;"><strong>if</strong></span> (e <span style="color:#000000;"><strong>!</strong></span><span style="color:#000000;"><strong>=</strong></span> <span style="color:#cc00cc;">null</span>)    <span style="color:#000000;"><strong>{<br />  </strong></span> value  <span style="color:#000000;"><strong>=</strong></span> (String)e.<span style="color:#9966ff;">getValue</span>();<br />   LOGGER.<span style="color:#9966ff;">info</span>(<span style="color:#ff00cc;">"</span><span style="color:#ff00cc;">retrieved</span><span style="color:#ff00cc;"> </span><span style="color:#ff00cc;">"</span><span style="color:#000000;"><strong>+</strong> </span>value<span style="color:#000000;"><strong>+</strong></span><span style="color:#ff00cc;">"</span><span style="color:#ff00cc;"> </span><span style="color:#ff00cc;">from</span><span style="color:#ff00cc;"> </span><span style="color:#ff00cc;">cache</span> <span style="color:#ff00cc;">"</span>);<br /> <span style="color:#000000;"><strong>}<br /></strong></span>  <span style="color:#006699;"><strong>else</strong></span>   <span style="color:#000000;"><strong>{<br />  </strong></span> value <span style="color:#000000;"><strong>=</strong></span> <span style="color:#ff00cc;">"</span><span style="color:#ff00cc;">new</span><span style="color:#ff00cc;"> </span><span style="color:#ff00cc;">value</span><span style="color:#ff00cc;">"</span> ;<br />   cache.<span style="color:#9966ff;">put</span>(<span style="color:#006699;"><strong>new</strong></span> <span style="color:#9966ff;">Element</span>(key, value));<br /> <span style="color:#000000;"><strong>}<br /></strong></span> <span style="color:#006699;"><strong> return</strong></span> value;<br /><span style="color:#000000;"><strong>}<br /><br /></strong></span><span style="color:#6600cc;">/**<br /></span> <span style="color:#6600cc;"></span><span style="color:#6600cc;">*</span><span style="color:#6600cc;"> </span><span style="color:#6600cc;">refresh</span><span style="color:#6600cc;"> </span><span style="color:#6600cc;">value</span><span style="color:#6600cc;"> </span> <span style="color:#6600cc;">for</span><span style="color:#6600cc;"> </span><span style="color:#6600cc;">given</span><span style="color:#6600cc;"> </span><span style="color:#6600cc;">key</span> <span style="color:#6600cc;"></span><span style="color:#6600cc;">*/<br /></span><span style="color:#006699;"><strong>public</strong></span> <span style="color:#0099ff;"><strong>void</strong></span> <span style="color:#9966ff;">refresh</span>(String key) <span style="color:#000000;"><strong>{</strong></span> cache.<span style="color:#9966ff;">remove</span>(key); <span style="color:#000000;"><strong>}<br /></strong></span><br /><span style="color:#6600cc;">/**<br /></span> <span style="color:#6600cc;"></span><span style="color:#6600cc;">*</span><span style="color:#6600cc;"> </span><span style="color:#6600cc;">to</span><span style="color:#6600cc;"> </span><span style="color:#6600cc;">call eventually</span><span style="color:#6600cc;"> </span> <span style="color:#6600cc;">when</span><span style="color:#6600cc;"> </span><span style="color:#6600cc;">your</span><span style="color:#6600cc;"> </span><span style="color:#6600cc;">application</span><span style="color:#6600cc;"> </span><span style="color:#6600cc;">is</span> <span style="color:#6600cc;"> </span><span style="color:#6600cc;">exiting</span> <span style="color:#6600cc;"> </span><span style="color:#6600cc;">*/</span><br /> <span style="color:#006699;"><strong>public</strong></span> <span style="color:#0099ff;"><strong>void</strong></span> <span style="color:#9966ff;">shutdown</span>() <span style="color:#000000;"><strong>{</strong></span> cacheManager.<span style="color:#9966ff;">shutdown</span>(); <span style="color:#000000;"><strong>}</strong></span> </pre></div> <div><span style="font-size:130%;">Conclusion</span></div> <div>Using EhCache is as simple a using a Java Map with an additional configuration file.</div> <div> </div>

  </div>
  
</div>




<a href="https://twitter.com/share" class="twitter-share-button"{count} data-hashtags="chasethedevil">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

<script src="http://chasethedevil.github.io/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script>
  var _gaq=[['_setAccount','UA-365717-1'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

</body>
</html>

